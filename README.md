# MITM Proxy Python

**MITM Proxy** ‚Äî —ç—Ç–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π HTTP/HTTPS –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Python.

–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- üîÑ –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å HTTP –∏ HTTPS-–∑–∞–ø—Ä–æ—Å—ã
- üìú –ü–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üîç –í—ã–ø–æ–ª–Ω—è—Ç—å –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π (XSS, SQLi)

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

```bash
make gen-cert
```

–°–æ–∑–¥–∞—é—Ç—Å—è:

- `ca.key` ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á CA
- `ca.crt` ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- `cert.key` ‚Äî –∫–ª—é—á, –Ω–∞ –±–∞–∑–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø–æ–¥–¥–µ–ª—å–Ω—ã–µ host-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

### 2. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Docker

```bash
make docker-build
make docker-start
```

–ü—Ä–æ–∫—Å–∏ —Å–ª—É—à–∞–µ—Ç:

- `http://localhost:8080` ‚Äî HTTP/HTTPS –ø—Ä–æ–∫—Å–∏
- `http://localhost:8000` ‚Äî REST API

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ CA –≤ —Å–∏—Å—Ç–µ–º—É (Windows):

```powershell
certutil -addstore -f "Root" ca.crt
```

–î–ª—è Linux/macOS ‚Äî –æ—Ç–∫—Ä–æ–π `ca.crt` –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
curl -x http://127.0.0.1:8080 http://example.com
curl -x http://127.0.0.1:8080 https://mail.ru -v --ssl-no-revoke --tlsv1.2
```

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP(S)

- –ü—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ (GET, POST, PUT, OPTIONS –∏ –¥—Ä)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TLS MITM: —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è "–Ω–∞ –ª–µ—Ç—É" –ø–æ–¥ –∫–∞–∂–¥—ã–π –¥–æ–º–µ–Ω

### REST API (–ø–æ—Ä—Ç 8000)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å             | –û–ø–∏—Å–∞–Ω–∏–µ                   |
| ----- | ---------------- | -------------------------- |
| GET   | `/requests`      | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤       |
| GET   | `/requests/<id>` | –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ |
| POST  | `/repeat/<id>`   | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–ø—Ä–æ—Å–∞ |
| POST  | `/scan/<id>`     | –í—ã–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑   |

---

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞

```bash
make docker-stop     # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
make clean-certs     # –£–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
```

---

## üõë –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–Ω–µ—à–Ω–∏–µ –ø—Ä–æ–∫—Å–∏-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `mitmproxy`, `proxy.py`)
- ‚úÖ –í—Å—ë —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö Python-–±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ `openssl`

---

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è ‚Äî VK Edu
MITM-–ø—Ä–æ–∫—Å–∏ —Å REST-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º. –ü—Ä–∏–≥–æ–¥–µ–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã HTTPS.

> > > > > > > 2134d0f (Initial commit)
